# Main example swarmstack ansible cluster file in INI format

[swarmstack:vars]
CLUSTER=swarmstack
REBOOT_DELAY=30     # For physical machines, try REBOOT_DELAY=300, and REBOOT_TIMEOUT=600
REBOOT_TIMEOUT=120  # Physical hosts may take much longer to boot.
SWARMJOIN=swarm01.example.com
ADMINPASSWORD=changeme!42

[dna-prd-swarm:children]
etcd
portworx
swarm
memory-32GB

[etcd]
swarm01.example.com
swarm02.example.com
swarm03.example.com


# When using Portworx PX-Developer version, use groups of 3 nodes per PWX_STORAGE_GROUP and apply
#  a single DOCKER_STORAGE_GROUP to the same 3 swarm hosts below. You can use this label as a constraint
#  when creating docker services that require persistent volumes. This will cause these 
#  containers to be scheduled onto one of the 3 nodes whose storage is replicated by Portworx.
#
# With PX-Enterprise, you can optionally just put all of your hosts into the portworx-RED group.

[portworx]
swarm01.example.com   PWX_STORAGE_GROUP='RED' DEVICES='["/dev/sdb"]' DATAIFACE=eth0 MGTIFACE=eth0
swarm02.example.com   PWX_STORAGE_GROUP='RED' DEVICES='["/dev/sdb"]' DATAIFACE=eth0 MGTIFACE=eth0
swarm03.example.com   PWX_STORAGE_GROUP='RED' DEVICES='["/dev/sdb"]' DATAIFACE=eth0 MGTIFACE=eth0

# swarm04.example.com PWX_STORAGE_GROUP='portworx-BLUE' DEVICES='["/dev/sdb"]' DATAIFACE=eth0 MGTIFACE=eth0
# swarm05.example.com PWX_STORAGE_GROUP='portworx-BLUE' DEVICES='["/dev/sdb"]' DATAIFACE=eth0 MGTIFACE=eth0
# swarm06.example.com PWX_STORAGE_GROUP='portworx-BLUE' DEVICES='["/dev/sdb"]' DATAIFACE=eth0 MGTIFACE=eth0


# Docker recommends no more than 7 manager nodes in a cluster.
# 5 or 3 managers are warranted for smaller clusters.

[swarm]
swarm01.example.com   DOCKER_STORAGE_GROUP='RED'  ROLE='manager'
swarm02.example.com   DOCKER_STORAGE_GROUP='RED'  ROLE='manager'
swarm03.example.com   DOCKER_STORAGE_GROUP='RED'  ROLE='manager'

# swarm04.example.com DOCKER_STORAGE_GROUP='BLUE' ROLE='manager'
# swarm05.example.com DOCKER_STORAGE_GROUP='BLUE' ROLE='manager'
# swarm06.example.com DOCKER_STORAGE_GROUP='BLUE'

# see playbooks/includes/tasks/sysctl_el7.yml to add other memory configurations
[memory-2GB]
[memory-4GB]
[memory-8GB]
[memory-16GB]

[memory-32GB]
swarm01.example.com
swarm02.example.com
swarm03.example.com

[memory-64GB]
[memory-96GB]
